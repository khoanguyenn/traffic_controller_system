(this.webpackJsonptraffic_controller=this.webpackJsonptraffic_controller||[]).push([[0],{105:function(e,t,n){},110:function(e,t,n){},111:function(e,t,n){},112:function(e,t,n){},113:function(e,t,n){},114:function(e,t,n){"use strict";n.r(t);var c=n(0),a=n.n(c),i=n(10),r=n.n(i),s=(n(96),n(97),n(14)),o=n.n(s),l=n(23),u=n(17),j=n(150),d=n(153),h=n(155),x=n(115),b=n(156),m=n(2),p=Object(j.a)({root:{minWidth:350,height:"fit-content",paddingTop:10,paddingBottom:30},title:{paddingBottom:18},alignleft:{float:"left"},alignright:{float:"right",opacity:.6},textbox:{clear:"both",height:50}}),f=function(e){var t=p();return Object(m.jsx)(d.a,{className:t.root,variant:"outlined",children:Object(m.jsxs)(h.a,{children:[Object(m.jsx)(x.a,{className:t.title,variant:"h6",gutterBottom:!0,children:"User's Info"}),Object(m.jsxs)("div",{className:t.textbox,children:[Object(m.jsx)("p",{className:t.alignleft,children:"Username"}),Object(m.jsx)("p",{className:t.alignright,children:e.userInfo.name})]}),Object(m.jsx)(b.a,{}),Object(m.jsxs)("div",{className:t.textbox,children:[Object(m.jsx)("p",{className:t.alignleft,children:"Gmail"}),Object(m.jsx)("p",{className:t.alignright,children:e.userInfo.email})]}),Object(m.jsx)(b.a,{}),Object(m.jsxs)("div",{className:t.textbox,children:[Object(m.jsx)("p",{className:t.alignleft,children:"Device ID"}),Object(m.jsx)("p",{className:t.alignright,children:e.userInfo.deviceID})]}),Object(m.jsx)(b.a,{}),Object(m.jsxs)("div",{className:t.textbox,children:[Object(m.jsx)("p",{className:t.alignleft,children:"Web IP"}),Object(m.jsx)("p",{className:t.alignright,children:e.userInfo.webIP})]})]})})},O=n(11),v="https://jsonplaceholder.typicode.com/photos?_limit=10",g="http://localhost:4000/api/device/list-devices",N="http://localhost:4000/api/device/get-device?deviceId=",y="/home/device/",w=Object(j.a)({root:{minWidth:600,height:"fit-content",paddingTop:10},title:{paddingBottom:18},alignleft:{float:"left"},alignright:{float:"right",opacity:.6},textbox:{clear:"both",height:50,paddingLeft:15,paddingRight:15,"&:hover":{background:"#efefef",cursor:"pointer"}}}),I=function(e){var t=w(),n=Object(O.g)();return Object(m.jsx)(d.a,{className:t.root,variant:"outlined",children:Object(m.jsxs)(h.a,{children:[Object(m.jsx)(x.a,{className:t.title,variant:"h6",gutterBottom:!0,children:"Device List"}),0===e.deviceList.length&&Object(m.jsx)(x.a,{variant:"caption",display:"block",gutterBottom:!0,children:"There is no devices."}),e.deviceList.length>0&&Object(m.jsx)(a.a.Fragment,{children:e.deviceList.map((function(e){return Object(m.jsxs)(a.a.Fragment,{children:[Object(m.jsx)(b.a,{}),Object(m.jsxs)("div",{onClick:function(){return t=e.id,void n.push(y+t);var t},className:t.textbox,children:[Object(m.jsx)("p",{className:t.alignleft,children:e.name}),Object(m.jsx)("p",{className:t.alignright,children:e.status})]})]})}))})]})})},C=n(157),B=n(158),k=n(159),S=n(77),T=n.n(S),P=n(172),A=n(79),D=(n(105),n(66)),_=n(80),L=["children"],R={isAuthenticated:!1,signin:function(e){R.isAuthenticated=!0,setTimeout(e,100)},signout:function(e){R.isAuthenticated=!1,setTimeout(e,100)}},W=Object(c.createContext)();var E={ProvideAuth:function(e){var t=e.children,n=function(){var e=Object(c.useState)(null),t=Object(u.a)(e,2),n=t[0],a=t[1];return{user:n,signin:function(e){return R.signin((function(){a("user"),e()}))},signout:function(e){return R.signout((function(){a(null),e()}))}}}();return Object(m.jsx)(W.Provider,{value:n,children:t})},useAuth:function(){return Object(c.useContext)(W)},PrivateRoute:function(e){var t=e.children,n=Object(_.a)(e,L),c=E.useAuth();return Object(m.jsx)(O.b,Object(D.a)(Object(D.a)({},n),{},{render:function(e){var n=e.location;return c.user?t:Object(m.jsx)(O.a,{to:{pathname:"/login",state:{from:n}}})}}))}},F=E,z=Object(j.a)((function(e){return{root:{flexGrow:1},title:{flexGrow:1}}}));var G=function(){var e=z(),t=a.a.useState(null),n=Object(u.a)(t,2),c=n[0],i=n[1],r=Boolean(c),s=Object(O.g)(),o=F.useAuth();return Object(m.jsx)("div",{className:e.root,children:Object(m.jsx)(C.a,{position:"static",children:Object(m.jsxs)(B.a,{children:[Object(m.jsx)(x.a,{variant:"h6",className:e.title,children:"Traffic Controller System"}),o&&Object(m.jsxs)("div",{children:[Object(m.jsx)(k.a,{"aria-label":"account of current user","aria-controls":"menu-appbar","aria-haspopup":"true",onClick:function(e){i(e.currentTarget)},color:"inherit",children:Object(m.jsx)(T.a,{})}),Object(m.jsxs)(A.a,{id:"menu-appbar",anchorEl:c,anchorOrigin:{vertical:"top",horizontal:"right"},keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:r,onClose:function(){i(null)},children:[Object(m.jsx)(P.a,{onClick:function(){i(null),s.push("/profile")},children:"My Profile"}),Object(m.jsx)(P.a,{onClick:function(){i(null),o.signout((function(){return s.push("/")}))},children:"Sign out"})]})]})]})})})};var H=function(){return Object(m.jsx)(a.a.Fragment,{children:Object(m.jsx)("p",{children:"This is a footer !"})})};n(110);var M=function(e){return Object(m.jsxs)(a.a.Fragment,{children:[Object(m.jsx)(G,{}),Object(m.jsx)("div",{className:"layout__inner",children:e.children}),Object(m.jsx)(H,{})]})};function U(){return J.apply(this,arguments)}function J(){return(J=Object(l.a)(o.a.mark((function e(){var t,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(v);case 2:return t=e.sent,e.next=5,t.json();case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function V(){return Y.apply(this,arguments)}function Y(){return(Y=Object(l.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e){return setTimeout(e,1e3)}));case 2:return e.abrupt("return",{name:"Administrator",email:"admin@gmail.com",deviceID:"12",webIP:"localhost"});case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function q(){return K.apply(this,arguments)}function K(){return(K=Object(l.a)(o.a.mark((function e(){var t,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(g);case 2:return t=e.sent,e.next=5,t.json();case 5:return n=e.sent,e.abrupt("return",n.devices);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Q(e){return X.apply(this,arguments)}function X(){return(X=Object(l.a)(o.a.mark((function e(t){var n,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(N+t);case 2:return n=e.sent,e.next=5,n.json();case 5:return c=e.sent,e.abrupt("return",c);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Z=function(e){var t=Object(c.useState)({}),n=Object(u.a)(t,2),a=n[0],i=n[1],r=Object(c.useState)({}),s=Object(u.a)(r,2),j=s[0],d=s[1];Object(c.useEffect)((function(){h()}),[]);var h=Object(c.useCallback)(Object(l.a)(o.a.mark((function e(){var t,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,V();case 2:return t=e.sent,e.next=5,q();case 5:n=e.sent,i(t),d(n);case 8:case"end":return e.stop()}}),e)}))));return Object(m.jsxs)(M,{children:[Object(m.jsx)(f,{userInfo:a}),Object(m.jsx)(I,{deviceList:j})]})},$=(n(111),n(162)),ee=n(160),te=n(161),ne=Object(j.a)((function(e){return{root:{maxWidth:"100%",maxHeight:120,display:"flex"},card:{display:"flex",width:"100%"},details:{display:"flex",flexDirection:"column",padding:"1rem 0.5rem"},description:{fontSize:".8rem"},image:{minHeight:120,minWidth:120}}})),ce=function(e){var t=ne(),n=e.vehicle;return Object(m.jsx)("div",{children:Object(m.jsx)(d.a,{className:t.root,children:Object(m.jsxs)(ee.a,{className:t.card,children:[Object(m.jsx)(te.a,{className:t.image,image:n.url,title:"Contemplative Reptile"}),Object(m.jsxs)(h.a,{className:t.details,children:[Object(m.jsx)(x.a,{gutterBottom:!0,variant:"h5",component:"h2",className:"vehicle-card__title",children:n.id}),Object(m.jsx)(x.a,{variant:"body2",color:"textSecondary",component:"p",className:t.description,children:n.title.length>25?n.title.slice(0,25).concat("..."):n.title})]})]})})})};n(112);var ae=function(){var e=Object(c.useState)([]),t=Object(u.a)(e,2),n=t[0],a=t[1];return Object(c.useEffect)((function(){function e(){return(e=Object(l.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,U();case 2:t=e.sent,console.log(t),a(t);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),Object(m.jsxs)($.a,{container:!0,spacing:2,children:[Object(m.jsx)($.a,{item:!0,xs:12,children:Object(m.jsx)(x.a,{variant:"h6",className:"vehicle-list__title",children:"Vehicle detection"})}),n&&n.map((function(e){return Object(m.jsx)($.a,{item:!0,xs:6,children:Object(m.jsx)(ce,{vehicle:e})})})),0===n.length&&Object(m.jsx)("p",{children:"No vehicle found !"})]})},ie=(n(113),n(78)),re=function(e){var t=Object(c.useState)(""),n=Object(u.a)(t,2),a=n[0],i=n[1];return Object(c.useEffect)((function(){!function(){var e=Object(l.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Q(t);case 2:n=e.sent,i(n.device.url);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(e.deviceId)}),[]),Object(m.jsxs)("div",{className:"traffic-streamer",children:[Object(m.jsx)("p",{children:a}),Object(m.jsx)(ie.a,{src:a,autoPlay:!1,controls:!0,width:"100%",height:"auto"}),e.toolBar]})},se=n(164),oe=n(165),le=n(173),ue=n(170),je=n(171),de=n(163),he=Object(j.a)({dialog:{height:"600px",width:"600px",padding:"5px 20px"},commandBox:{height:"400px",width:"100%"},commandInput:{width:"80%",height:"50px",marginRight:"5px"},commandBar:{width:"100%",marginTop:"10px",display:"flex",alignItems:"center"},commandButton:{width:"20%"}}),xe=function(e){var t=he(),n=Object(c.useState)(""),a=Object(u.a)(n,2),i=a[0],r=a[1],s=Object(c.useState)(""),o=Object(u.a)(s,2),l=o[0],j=o[1],d=e.onClose,h=e.open;return Object(m.jsxs)(je.a,{onClose:d,open:h,children:[Object(m.jsx)(de.a,{children:"Command Terminal"}),Object(m.jsxs)("div",{className:t.dialog,children:[Object(m.jsx)("div",{children:Object(m.jsx)("textarea",{readOnly:!0,placeholder:"Executing command...",className:t.commandBox,value:l})}),Object(m.jsxs)("form",{className:t.commandBar,onSubmit:function(e){e.preventDefault(),i.trim().length>0&&j((function(e){return[e+i+"\n"]})),r("")},children:[Object(m.jsx)("input",{type:"text",placeholder:"Please enter a command...",className:t.commandInput,onChange:function(e){r(e.target.value)},value:i}),Object(m.jsx)(se.a,{type:"submit",variant:"contained",color:"primary",className:t.commandButton,children:"Submit"})]})]})]})},be=function(e){var t=Object(O.i)().deviceId,n=Object(c.useState)(!1),a=Object(u.a)(n,2),i=a[0],r=a[1],s=Object(m.jsxs)("div",{style:{margin:"10px 20px"},children:[Object(m.jsx)(se.a,{onClick:function(){r(!0)},variant:"contained",color:"primary",children:"Command Box"}),Object(m.jsxs)(oe.a,{variant:"outlined",style:{marginLeft:"15px"},children:[Object(m.jsx)(le.a,{id:"demo-simple-select-outlined-label",children:"Stream"}),Object(m.jsxs)(ue.a,{labelId:"demo-simple-select-outlined-label",id:"demo-simple-select-outlined",value:"Ten",style:{minWidth:120},label:"Stream",children:[Object(m.jsx)(P.a,{value:"",children:Object(m.jsx)("em",{children:"None"})}),Object(m.jsx)(P.a,{value:10,children:"Nostream"}),Object(m.jsx)(P.a,{value:20,children:"Dotstream"}),Object(m.jsx)(P.a,{value:30,children:"doesnotstream"})]})]})]});return Object(m.jsxs)(M,{children:[Object(m.jsxs)($.a,{container:!0,spacing:3,children:[Object(m.jsx)($.a,{item:!0,xs:12,md:8,children:Object(m.jsx)(re,{deviceId:t,toolBar:s})}),Object(m.jsx)($.a,{item:!0,xs:12,md:4,children:Object(m.jsx)(ae,{})})]}),Object(m.jsx)(xe,{open:i,onClose:function(){r(!1)}})]})},me=n(82),pe=n(175),fe=n(168),Oe=Object(j.a)((function(e){return{container:{minHeight:"100vh",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},alert:{position:"absolute",top:"10px"},form:{width:"400px",height:"450px",backgroundColor:"#eeeeee",display:"flex",alignItems:"center",justifyContent:"center"},formTitle:{display:"inline-block",marginBottom:"15px"},formContainer:{display:"flex",flexDirection:"column",width:"350px",padding:"5px"},formInput:{marginBottom:"10px"},formButton:{marginTop:"10px",height:"45px"}}}));var ve=function(){var e=Oe(),t=Object(O.g)(),n=Object(O.h)(),c=F.useAuth(),a=(n.state||{from:{pathname:"/"}}).from;return Object(m.jsxs)("div",{className:e.container,children:[a.pathname.length>0&&Object(m.jsxs)(fe.a,{severity:"error",className:e.alert,children:["You must log in to view the page at ",a.pathname]}),Object(m.jsx)(me.a,{elevation:2,className:e.form,children:Object(m.jsxs)("form",{className:e.formContainer,children:[Object(m.jsx)(x.a,{variant:"h5",components:"h5",className:e.formTitle,children:"Welcome, Traffic Controller \ud83e\uddf0"}),Object(m.jsx)(pe.a,{id:"outlined-helperText",label:"Username",type:"text",variant:"outlined",className:e.formInput}),Object(m.jsx)(pe.a,{id:"outlined-helperText",label:"Password",type:"password",variant:"outlined",className:e.formInput}),Object(m.jsx)(se.a,{variant:"contained",color:"primary",className:e.formButton,onClick:function(){c.signin((function(){t.replace(a)}))},children:"Login"})]})})]})},ge=n(35);var Ne=function(){return Object(m.jsx)(F.ProvideAuth,{className:"App",children:Object(m.jsx)(ge.a,{children:Object(m.jsx)("div",{children:Object(m.jsxs)(O.d,{children:[Object(m.jsx)(O.b,{exact:!0,path:"/login",children:Object(m.jsx)(ve,{})}),Object(m.jsx)(F.PrivateRoute,{exact:!0,path:"/",children:Object(m.jsx)(Z,{})}),Object(m.jsx)(F.PrivateRoute,{exact:!0,path:"/profile",children:Object(m.jsx)(Z,{})}),Object(m.jsx)(F.PrivateRoute,{path:"/home/device/:deviceId",children:Object(m.jsx)(be,{})})]})})})})};r.a.render(Object(m.jsx)(a.a.StrictMode,{children:Object(m.jsx)(Ne,{})}),document.getElementById("root"))},96:function(e,t,n){},97:function(e,t,n){}},[[114,1,2]]]);
//# sourceMappingURL=main.310bdc3e.chunk.js.map