(this.webpackJsonptraffic_controller=this.webpackJsonptraffic_controller||[]).push([[0],{105:function(e,t,n){},110:function(e,t,n){},111:function(e,t,n){},112:function(e,t,n){},113:function(e,t,n){},114:function(e,t,n){"use strict";n.r(t);var c=n(0),a=n.n(c),i=n(10),r=n.n(i),s=(n(96),n(97),n(18)),o=n.n(s),l=n(26),j=n(16),u=n(150),d=n(153),h=n(155),m=n(115),b=n(156),x=n(2),p=Object(u.a)({root:{minWidth:350,height:"fit-content",paddingTop:10,paddingBottom:30},title:{paddingBottom:18},alignleft:{float:"left"},alignright:{float:"right",opacity:.6},textbox:{clear:"both",height:50}}),f=function(e){var t=p();return Object(x.jsx)(d.a,{className:t.root,variant:"outlined",children:Object(x.jsxs)(h.a,{children:[Object(x.jsx)(m.a,{className:t.title,variant:"h6",gutterBottom:!0,children:"User's Info"}),Object(x.jsxs)("div",{className:t.textbox,children:[Object(x.jsx)("p",{className:t.alignleft,children:"Username"}),Object(x.jsx)("p",{className:t.alignright,children:e.userInfo.name})]}),Object(x.jsx)(b.a,{}),Object(x.jsxs)("div",{className:t.textbox,children:[Object(x.jsx)("p",{className:t.alignleft,children:"Gmail"}),Object(x.jsx)("p",{className:t.alignright,children:e.userInfo.email})]}),Object(x.jsx)(b.a,{}),Object(x.jsxs)("div",{className:t.textbox,children:[Object(x.jsx)("p",{className:t.alignleft,children:"Device ID"}),Object(x.jsx)("p",{className:t.alignright,children:e.userInfo.deviceID})]}),Object(x.jsx)(b.a,{}),Object(x.jsxs)("div",{className:t.textbox,children:[Object(x.jsx)("p",{className:t.alignleft,children:"Web IP"}),Object(x.jsx)("p",{className:t.alignright,children:e.userInfo.webIP})]})]})})},O=n(11),v="https://jsonplaceholder.typicode.com/photos?_limit=10",g="/api/device/list-devices",N="/home/device/",y=Object(u.a)({root:{minWidth:600,height:"fit-content",paddingTop:10},title:{paddingBottom:18},alignleft:{float:"left"},alignright:{float:"right",opacity:.6},textbox:{clear:"both",height:50,paddingLeft:15,paddingRight:15,"&:hover":{background:"#efefef",cursor:"pointer"}}}),w=function(e){var t=y(),n=Object(O.g)();return Object(x.jsx)(d.a,{className:t.root,variant:"outlined",children:Object(x.jsxs)(h.a,{children:[Object(x.jsx)(m.a,{className:t.title,variant:"h6",gutterBottom:!0,children:"Device List"}),0===e.deviceList.length&&Object(x.jsx)(m.a,{variant:"caption",display:"block",gutterBottom:!0,children:"There is no devices."}),e.deviceList.length>0&&Object(x.jsx)(a.a.Fragment,{children:e.deviceList.map((function(e){return Object(x.jsxs)(a.a.Fragment,{children:[Object(x.jsx)(b.a,{}),Object(x.jsxs)("div",{onClick:function(){return t=e.id,void n.push(N+t);var t},className:t.textbox,children:[Object(x.jsx)("p",{className:t.alignleft,children:e.name}),Object(x.jsx)("p",{className:t.alignright,children:e.status})]})]})}))})]})})},I=n(157),C=n(158),B=n(159),k=n(77),S=n.n(k),T=n(172),P=n(79),A=(n(105),n(66)),D=n(80),_=["children"],L={isAuthenticated:!1,signin:function(e){L.isAuthenticated=!0,setTimeout(e,100)},signout:function(e){L.isAuthenticated=!1,setTimeout(e,100)}},R=Object(c.createContext)();var W={ProvideAuth:function(e){var t=e.children,n=function(){var e=Object(c.useState)(null),t=Object(j.a)(e,2),n=t[0],a=t[1];return{user:n,signin:function(e){return L.signin((function(){a("user"),e()}))},signout:function(e){return L.signout((function(){a(null),e()}))}}}();return Object(x.jsx)(R.Provider,{value:n,children:t})},useAuth:function(){return Object(c.useContext)(R)},PrivateRoute:function(e){var t=e.children,n=Object(D.a)(e,_),c=W.useAuth();return Object(x.jsx)(O.b,Object(A.a)(Object(A.a)({},n),{},{render:function(e){var n=e.location;return c.user?t:Object(x.jsx)(O.a,{to:{pathname:"/login",state:{from:n}}})}}))}},E=W,z=Object(u.a)((function(e){return{root:{flexGrow:1},title:{flexGrow:1}}}));var F=function(){var e=z(),t=a.a.useState(null),n=Object(j.a)(t,2),c=n[0],i=n[1],r=Boolean(c),s=Object(O.g)(),o=E.useAuth();return Object(x.jsx)("div",{className:e.root,children:Object(x.jsx)(I.a,{position:"static",children:Object(x.jsxs)(C.a,{children:[Object(x.jsx)(m.a,{variant:"h6",className:e.title,children:"Traffic Controller System"}),o&&Object(x.jsxs)("div",{children:[Object(x.jsx)(B.a,{"aria-label":"account of current user","aria-controls":"menu-appbar","aria-haspopup":"true",onClick:function(e){i(e.currentTarget)},color:"inherit",children:Object(x.jsx)(S.a,{})}),Object(x.jsxs)(P.a,{id:"menu-appbar",anchorEl:c,anchorOrigin:{vertical:"top",horizontal:"right"},keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:r,onClose:function(){i(null)},children:[Object(x.jsx)(T.a,{onClick:function(){i(null),s.push("/profile")},children:"My Profile"}),Object(x.jsx)(T.a,{onClick:function(){i(null),o.signout((function(){return s.push("/")}))},children:"Sign out"})]})]})]})})})};var G=function(){return Object(x.jsx)(a.a.Fragment,{children:Object(x.jsx)("p",{children:"This is a footer !"})})};n(110);var H=function(e){return Object(x.jsxs)(a.a.Fragment,{children:[Object(x.jsx)(F,{}),Object(x.jsx)("div",{className:"layout__inner",children:e.children}),Object(x.jsx)(G,{})]})};function M(){return U.apply(this,arguments)}function U(){return(U=Object(l.a)(o.a.mark((function e(){var t,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(v);case 2:return t=e.sent,e.next=5,t.json();case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function J(){return V.apply(this,arguments)}function V(){return(V=Object(l.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e){return setTimeout(e,1e3)}));case 2:return e.abrupt("return",{name:"Administrator",email:"admin@gmail.com",deviceID:"12",webIP:"localhost"});case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Y(){return q.apply(this,arguments)}function q(){return(q=Object(l.a)(o.a.mark((function e(){var t,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(g);case 2:return t=e.sent,e.next=5,t.json();case 5:return n=e.sent,e.abrupt("return",n.devices);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var K=function(e){var t=Object(c.useState)({}),n=Object(j.a)(t,2),a=n[0],i=n[1],r=Object(c.useState)({}),s=Object(j.a)(r,2),u=s[0],d=s[1];Object(c.useEffect)((function(){h()}),[]);var h=Object(c.useCallback)(Object(l.a)(o.a.mark((function e(){var t,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,J();case 2:return t=e.sent,e.next=5,Y();case 5:n=e.sent,i(t),d(n);case 8:case"end":return e.stop()}}),e)}))));return Object(x.jsxs)(H,{children:[Object(x.jsx)(f,{userInfo:a}),Object(x.jsx)(w,{deviceList:u})]})},Q=(n(111),n(162)),X=n(160),Z=n(161),$=Object(u.a)((function(e){return{root:{maxWidth:"100%",maxHeight:120,display:"flex"},card:{display:"flex",width:"100%"},details:{display:"flex",flexDirection:"column",padding:"1rem 0.5rem"},description:{fontSize:".8rem"},image:{minHeight:120,minWidth:120}}})),ee=function(e){var t=$(),n=e.vehicle;return Object(x.jsx)("div",{children:Object(x.jsx)(d.a,{className:t.root,children:Object(x.jsxs)(X.a,{className:t.card,children:[Object(x.jsx)(Z.a,{className:t.image,image:n.url,title:"Contemplative Reptile"}),Object(x.jsxs)(h.a,{className:t.details,children:[Object(x.jsx)(m.a,{gutterBottom:!0,variant:"h5",component:"h2",className:"vehicle-card__title",children:n.id}),Object(x.jsx)(m.a,{variant:"body2",color:"textSecondary",component:"p",className:t.description,children:n.title.length>25?n.title.slice(0,25).concat("..."):n.title})]})]})})})};n(112);var te=function(){var e=Object(c.useState)([]),t=Object(j.a)(e,2),n=t[0],a=t[1];return Object(c.useEffect)((function(){function e(){return(e=Object(l.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M();case 2:t=e.sent,console.log(t),a(t);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),Object(x.jsxs)(Q.a,{container:!0,spacing:2,children:[Object(x.jsx)(Q.a,{item:!0,xs:12,children:Object(x.jsx)(m.a,{variant:"h6",className:"vehicle-list__title",children:"Vehicle detection"})}),n&&n.map((function(e){return Object(x.jsx)(Q.a,{item:!0,xs:6,children:Object(x.jsx)(ee,{vehicle:e})})})),0===n.length&&Object(x.jsx)("p",{children:"No vehicle found !"})]})},ne=(n(113),n(78)),ce=function(e){var t=Object(c.useState)(""),n=Object(j.a)(t,2),a=n[0],i=n[1];return Object(c.useEffect)((function(){i("https://streaming.www.zdobyc.xyz/live/".concat(e.deviceId,".m3u8"))}),[]),Object(x.jsxs)("div",{className:"traffic-streamer",children:[Object(x.jsx)("p",{style:{color:"lightcyan"},children:a}),Object(x.jsx)(ne.a,{src:a,autoPlay:!1,controls:!0,width:"100%",height:"auto"}),e.toolBar]})},ae=n(164),ie=n(165),re=n(173),se=n(170),oe=n(171),le=n(163),je=Object(u.a)({dialog:{height:"600px",width:"600px",padding:"5px 20px"},commandBox:{height:"400px",width:"100%"},commandInput:{width:"80%",height:"50px",marginRight:"5px"},commandBar:{width:"100%",marginTop:"10px",display:"flex",alignItems:"center"},commandButton:{width:"20%"}}),ue=function(e){var t=je(),n=Object(c.useState)(""),a=Object(j.a)(n,2),i=a[0],r=a[1],s=Object(c.useState)(""),o=Object(j.a)(s,2),l=o[0],u=o[1],d=e.onClose,h=e.open;return Object(x.jsxs)(oe.a,{onClose:d,open:h,children:[Object(x.jsx)(le.a,{children:"Command Terminal"}),Object(x.jsxs)("div",{className:t.dialog,children:[Object(x.jsx)("div",{children:Object(x.jsx)("textarea",{readOnly:!0,placeholder:"Executing command...",className:t.commandBox,value:l})}),Object(x.jsxs)("form",{className:t.commandBar,onSubmit:function(e){e.preventDefault(),i.trim().length>0&&u((function(e){return[e+i+"\n"]})),r("")},children:[Object(x.jsx)("input",{type:"text",placeholder:"Please enter a command...",className:t.commandInput,onChange:function(e){r(e.target.value)},value:i}),Object(x.jsx)(ae.a,{type:"submit",variant:"contained",color:"primary",className:t.commandButton,children:"Submit"})]})]})]})},de=function(e){var t=Object(O.i)().deviceId,n=Object(c.useState)(!1),a=Object(j.a)(n,2),i=a[0],r=a[1],s=Object(x.jsxs)("div",{style:{margin:"10px 20px"},children:[Object(x.jsx)(ae.a,{onClick:function(){r(!0)},variant:"contained",color:"primary",children:"Command Box"}),Object(x.jsxs)(ie.a,{variant:"outlined",style:{marginLeft:"15px"},children:[Object(x.jsx)(re.a,{id:"demo-simple-select-outlined-label",children:"Stream"}),Object(x.jsxs)(se.a,{labelId:"demo-simple-select-outlined-label",id:"demo-simple-select-outlined",value:"Ten",style:{minWidth:120},label:"Stream",children:[Object(x.jsx)(T.a,{value:"",children:Object(x.jsx)("em",{children:"None"})}),Object(x.jsx)(T.a,{value:10,children:"Nostream"}),Object(x.jsx)(T.a,{value:20,children:"Dotstream"}),Object(x.jsx)(T.a,{value:30,children:"doesnotstream"})]})]})]});return Object(x.jsxs)(H,{children:[Object(x.jsxs)(Q.a,{container:!0,spacing:3,children:[Object(x.jsx)(Q.a,{item:!0,xs:12,md:8,children:Object(x.jsx)(ce,{deviceId:t,toolBar:s})}),Object(x.jsx)(Q.a,{item:!0,xs:12,md:4,children:Object(x.jsx)(te,{})})]}),Object(x.jsx)(ue,{open:i,onClose:function(){r(!1)}})]})},he=n(82),me=n(175),be=n(168),xe=Object(u.a)((function(e){return{container:{minHeight:"100vh",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},alert:{position:"absolute",top:"10px"},form:{width:"400px",height:"450px",backgroundColor:"#eeeeee",display:"flex",alignItems:"center",justifyContent:"center"},formTitle:{display:"inline-block",marginBottom:"15px"},formContainer:{display:"flex",flexDirection:"column",width:"350px",padding:"5px"},formInput:{marginBottom:"10px"},formButton:{marginTop:"10px",height:"45px"}}}));var pe=function(){var e=xe(),t=Object(O.g)(),n=Object(O.h)(),c=E.useAuth(),a=(n.state||{from:{pathname:"/"}}).from;return Object(x.jsxs)("div",{className:e.container,children:[a.pathname.length>0&&Object(x.jsxs)(be.a,{severity:"error",className:e.alert,children:["You must log in to view the page at ",a.pathname]}),Object(x.jsx)(he.a,{elevation:2,className:e.form,children:Object(x.jsxs)("form",{className:e.formContainer,children:[Object(x.jsx)(m.a,{variant:"h5",components:"h5",className:e.formTitle,children:"Welcome, Traffic Controller \ud83e\uddf0"}),Object(x.jsx)(me.a,{id:"outlined-helperText",label:"Username",type:"text",variant:"outlined",className:e.formInput}),Object(x.jsx)(me.a,{id:"outlined-helperText",label:"Password",type:"password",variant:"outlined",className:e.formInput}),Object(x.jsx)(ae.a,{variant:"contained",color:"primary",className:e.formButton,onClick:function(){c.signin((function(){t.replace(a)}))},children:"Login"})]})})]})},fe=n(35);var Oe=function(){return Object(x.jsx)(E.ProvideAuth,{className:"App",children:Object(x.jsx)(fe.a,{children:Object(x.jsx)("div",{children:Object(x.jsxs)(O.d,{children:[Object(x.jsx)(O.b,{exact:!0,path:"/login",children:Object(x.jsx)(pe,{})}),Object(x.jsx)(E.PrivateRoute,{exact:!0,path:"/",children:Object(x.jsx)(K,{})}),Object(x.jsx)(E.PrivateRoute,{exact:!0,path:"/profile",children:Object(x.jsx)(K,{})}),Object(x.jsx)(E.PrivateRoute,{path:"/home/device/:deviceId",children:Object(x.jsx)(de,{})})]})})})})};r.a.render(Object(x.jsx)(a.a.StrictMode,{children:Object(x.jsx)(Oe,{})}),document.getElementById("root"))},96:function(e,t,n){},97:function(e,t,n){}},[[114,1,2]]]);
//# sourceMappingURL=main.7eb5380f.chunk.js.map